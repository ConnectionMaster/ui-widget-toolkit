!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define("UWT",["d3"],e):"object"==typeof exports?exports.UWT=e(require("d3")):t.UWT=e(t.d3)}(window,function(t){return function(t){var e={};function i(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=344)}({2:function(t,e,i){"use strict";function a(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r(t){return function(e,i){return a(t(e),i)}}function o(t){return t||(t=a),1===t.length&&(t=r(t)),{left:function(e,i,a,r){for(null==a&&(a=0),null==r&&(r=e.length);a<r;){var o=a+r>>>1;t(e[o],i)<0?a=o+1:r=o}return a},right:function(e,i,a,r){for(null==a&&(a=0),null==r&&(r=e.length);a<r;){var o=a+r>>>1;t(e[o],i)>0?r=o:a=o+1}return a}}}Object.defineProperty(e,"__esModule",{value:!0}),e.getSelectionName=function(t){return"number"==typeof t?"n"+t:t?(t.length>0&&!isNaN(Number(t[0]))&&(t="z"+t),t=t.replace(/[\*\%\#\[\]\/\>\<\s\+\(\)\;\@\:\?\"=.,]/g,"-")):""},e.detectIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var a=t.indexOf("Edge/");return a>0&&parseInt(t.substring(a+5,t.indexOf(".",a)),10)},e.useIEPolyfill=function(t){try{new CustomEvent("test")}catch(i){var e=function(e,i){i=i||{bubbles:!1,cancelable:!1};var a=document.createEvent("MouseEvent");return a.initMouseEvent(e,i.bubbles,i.cancelable,t,0,0,0,0,0,!1,!1,!1,!1,0,null),a};e.prototype=Event.prototype,t.MouseEvent=e}},e.removeFromList=function(t,e){if(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},e.bisect=o,e.bucketData=function(t,e,i){for(var a=o().right,r=[],n=0;n<e.length-1;++n)r[n]=[];var u=e[0],s=e[e.length-1],c=e.slice(1);for(n=0;n<t.length;++n){var l=i(t[n]);l<u||l>s||r[a(c,l)].push(t[n])}var d={};for(n=0;n<e.length-1;++n)d[e[n]+"-"+e[n+1]]=r[n];return d},e.copy=function(t){var e={};for(var i in t)e[i]=t[i];return e},e.merge=function(t,e){for(var i in e)t[i]=e[i]},e.convertTraceToTrees=function(t){for(var e=[],i=[],a=[],r=0;r<t.length;r++){for(var o=t[r],n=i[i.length-1];i.length&&o.x>n.x+n.dx;)--i.length,--a.length,n=i[i.length-1];var u=a[a.length-1],s={key:o.key,value:o.dx,children:[],parent:u};o.name&&(s.name=o.name),u?u.children.push(s):e.push(s),i.push(o),a.push(s)}return e};var n=function(){function t(t){this._data=t||[]}return t.prototype.push=function(t){this._data.push(t)},t.prototype.get=function(t){return this._data[t]},t.prototype.length=function(){return this._data.length},t.prototype.getData=function(){return this._data},t}();e.SimpleBuffer=n;var u=function(){function t(t){this._data=new Array(t),this._startIdx=0,this._count=0,this._isRotating=!1}return t.prototype.push=function(t){this._isRotating?(this._data[this._startIdx]=t,++this._startIdx,this._startIdx===this._count&&(this._startIdx=0),this._isRotating=!0):this._count===this._data.length-1?(this._data[this._count]=t,++this._count,this._isRotating=!0):(this._data[this._count]=t,++this._count)},t.prototype.get=function(t){return this._isRotating&&(t+=this._startIdx)>=this._count&&(t-=this._count),this._data[t]},t.prototype.length=function(){return this._count},t.prototype.getData=function(){if(this._isRotating){for(var t=[],e=this._startIdx;e<this._data.length;++e)t.push(this._data[e]);for(e=0;e<this._startIdx;++e)t.push(this._data[e]);return t}return this._data},t}();e.RingBuffer=u,e.bisectBuffer=function(t){return t||(t=a),1===t.length&&(t=r(t)),{left:function(e,i,a,r){for(null==a&&(a=0),null==r&&(r=e.length());a<r;){var o=a+r>>>1;t(e.get(o),i)<0?a=o+1:r=o}return a},right:function(e,i,a,r){for(null==a&&(a=0),null==r&&(r=e.length());a<r;){var o=a+r>>>1;t(e.get(o),i)>0?r=o:a=o+1}return a}}},e.transposeKeys=function(t){var e={};function i(t,a,r,o){for(var n=[],u=0;u<a.length;++u)n[u]=a[u];if(n.push(r.key),Array.isArray(r.data))for(u=0;u<r.data.length;++u)i(t,n,r.data[u],o+1);else for(var s=t,c=n.length-1;c>=0;--c){var l=n[c],d=void 0;e.hasOwnProperty(l)?d=e[l]:(d=s.length,e[l]=d),s[d]||(s[d]={key:l,data:[]}),0===c?s[d].data=r.data:s=s[d].data}}for(var a=[],r=0;r<t.length;++r)i(a,[],t[r],0);return a},e.runFunctionOnLeaf=function t(e,i){if(e&&e.children&&e.children.length>0)for(var a=0;a<e.children.length;++a)t(e.children[a],i);else i(e)},e.isOverlapping=function(t,e){return t.x<=e.right&&t.right>=e.x&&t.y<=e.bottom&&t.bottom>=e.y}},25:function(t,e,i){"use strict";var a,r=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(64),n=i(2);e.findFirstInsertionIdx=n.bisectBuffer(function(t){return t.x}).left,e.findLastInsertionIdx=n.bisectBuffer(function(t){return t.x}).right;var u=function(){function t(){this._values=[]}return t.prototype.initialize=function(t,e,i){},t.prototype.getKey=function(){return""},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._values},t.prototype.decimateValues=function(t,e,i){var a=this;return Array.isArray(i)?i.forEach(function(t){a._values.push(t.getData())}):this._values=i.getData(),this._values},t}();e.XYDummyDecimator=u;var s=function(){function t(){this._name="Simple Unimplemented Decimator"}return t.prototype.initialize=function(t,e,i){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return this._name},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,i,a){if(this._decimatedValues=[],0===a.length())return this._decimatedValues;var r,o=e.findFirstInsertionIdx(a,t),n=e.findLastInsertionIdx(a,i);o>0&&--o,n<a.length()&&++n,r=t?Math.floor(this._xValueToCoord(t)):Math.floor(this._xValueToCoord(a.get(o).x));for(var u,s=o,c=o;c<n;++c){var l=a.get(c),d=Math.floor(this._xValueToCoord(l.x));u=c,d!==r&&(void 0===i||l.x<i&&l.x>t)&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(a,s,u,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(r),this._xCoordToValue(d))),r=d,s=u)}return s!==a.length()&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(a,s,u+1,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(r),this._xCoordToValue(void 0)))),this._decimatedValues},t}();e.CustomPointXYDecimator=s;var c=function(t){function e(){var i=t.call(this)||this;return i._key=e.KEY,i._name="Min",i._customFunc=function(t,e,i,a){if(t.length()>0&&e!==i){for(var r=Number.MAX_VALUE,o=void 0,n=e;n<i;++n){var u=t.get(n),s=u.y;s<r&&(o=u,r=s)}return[o]}return[]},i}return r(e,t),e.KEY="MinPointDecimator",e}(s);function l(t,e,i,a){if(t.length()>0&&e!==i){for(var r=0,n=e;n<i;++n){r+=t.get(n).y}return[new o.XYValue(t.get(i-1).x,r/(i-e))]}return[]}e.MinPointDecimator=c;var d=function(t){function e(){var i=t.call(this)||this;return i._key=e.KEY,i._name="Avg",i._customFunc=l,i}return r(e,t),e.KEY="AvgPointDecimator",e}(s);e.AvgPointDecimator=d;var h=function(t){function e(){var i=t.call(this)||this;return i._key=e.KEY,i._name="Max",i._customFunc=function(t,e,i,a){if(t.length()>0&&e!==i){for(var r=-Number.MAX_VALUE,o=void 0,n=e;n<i;++n){var u=t.get(n),s=u.y;s>r&&(o=u,r=s)}return[o]}return[]},i}return r(e,t),e.KEY="MaxPointDecimator",e}(s);e.MaxPointDecimator=h;var f=function(t){function e(){var i=t.call(this)||this;return i._key=e.KEY,i._name="XYPointDecimator",i._customFunc=function(t,e,i,a){for(var r={},o=[],n=e;n<i;++n){var u=t.get(n),s=Math.floor(a(u.y));r.hasOwnProperty(s.toString())||(o.push(u),r[s]=!0)}return o},i}return r(e,t),e.KEY="XYPointDecimator",e}(s);e.XYPointDecimator=f;var m=function(){function t(){this._name="Simple Unimplemented Decimator"}return t.prototype.initialize=function(t,e,i){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return this._name},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,i,a){if(this._decimatedValues=[],0===a.length())return this._decimatedValues;var r,o,n=e.findFirstInsertionIdx(a,t),u=e.findLastInsertionIdx(a,i);n>0&&--n,u<a.length()&&++u,n<a.length()&&(r=Math.floor(this._xValueToCoord(a.get(n).x)),--r),o=t?this._xValueToCoord(t):n;for(var s=n,c=n;c<u;++c){var l=a.get(c),d=Math.floor(this._xValueToCoord(l.x)),h=c+1;d!==r&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(a,s,h,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(o),this._xCoordToValue(d))),o=d,r=d,s=h)}return s!==a.length()&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(a,s,s+1,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(o),Number.MAX_VALUE))),this._decimatedValues},t}();e.CustomContinuousXYDecimator=m;var _=function(t){function e(){var i=t.call(this)||this;return i._key=e.KEY,i._name="Avg",i._customFunc=l,i}return r(e,t),e.KEY="AvgContinuousDecimator",e}(m);function p(t,i,a,r,o,n){var u=[],s=[],c=Math.ceil(t(Number.MAX_VALUE));if(!(c<0)){for(var l=[],d=0;d<=c+1;++d)l.push(i(d));for(var h=0;h<n.length;++h){var f=n[h],m=void 0,_=void 0,p=e.findFirstInsertionIdx(n[h],r),x=e.findLastInsertionIdx(n[h],o);p>0&&--p,x===f.length()&&--x,s[h]=Array.apply(null,Array(c)).map(Number.prototype.valueOf,0);for(var y=p;y<x;++y){m=f.get(y),_=f.get(y+1);var V=Math.floor(t(m.x)),v=Math.floor(t(_.x)),g=_.x-m.x,T=0===g?0:_.y/g;if(V===v)if(void 0===r||m.x>r&&_.x<o)s[h][V]+=T;else{var C=1/(l[V+1]-l[V]);_.x<o?s[h][V]+=(_.x-l[V])*T*C:s[h][V]+=(l[V+1]-m.x)*T*C}else{C=1/(l[V+1]-l[V]);var b=r?Math.max(r,m.x):m.x,M=l[V+1];s[h][V]+=(M-b)*T*C;for(var k=V+1;k<v;++k)s[h][k]+=T;C=1/(l[v]-l[v-1]);var D=o?Math.min(o,_.x):_.x,E=l[v];s[h][v]+=(D-E)*T*C}}u[h]=[];var A=s[h];for(d=0;d<A.length;++d)u[h][d]={x:l[d],y:s[h][d]}}return u}}e.AvgContinuousDecimator=_,e.sumMultiXYSeriesValues=p;var x=function(){function t(){}return t.prototype.initialize=function(t,e,i){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,e,i){return this._decimatedValues=p(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,i),this._decimatedValues},t.KEY="SummedValueMultiXYSeriesDecimator",t}();e.SummedValueMultiXYSeriesDecimator=x;var y=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.getKey=function(){return e.KEY},e.prototype.getName=function(){return""},e.prototype.decimateValues=function(t,e,i){this._decimatedValues=p(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,i);for(var a=0;a<this._decimatedValues[0].length;++a){for(var r=0,o=0;o<this._decimatedValues.length;++o)this._decimatedValues[o][a].y&&(r+=this._decimatedValues[o][a].y);if(r>0){var n=100/r;for(o=0;o<i.length;++o)this._decimatedValues[o][a].y&&(this._decimatedValues[o][a].y=this._decimatedValues[o][a].y*n)}}return this._decimatedValues},e.KEY="ResidencyDecimator",e}(x);e.ResidencyDecimator=y;var V=function(){function t(){}return t.prototype.initialize=function(t,e,i){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,e,i){return this._decimatedValues=p(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,[i])[0],this._decimatedValues},t.KEY="SummedValueXYSeriesDecimator",t}();e.SummedValueXYSeriesDecimator=V;var v=function(t){function e(e){var i=t.call(this,e,void 0,void 0,void 0,void 0)||this;return i._bucketPts=0,i}return r(e,t),e}(o.CandlestickValue);e.NEWSDecimationValue=v;var g=function(){function t(){}return t.prototype.initialize=function(t,e,i){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._buckets},t.prototype._dumpBucket=function(t,e,i){var a="valuesInBucket = "+i.toFixed(0)+", ";return a+="([avg]Time delta, avgValue) = ("+(e.x-t).toFixed(2)+", "+e.y.toFixed(2)+"), ",a+="(entry, min, max, exit) = ("+e.entry.toFixed(2)+", "+e.min.toFixed(2)+", "+e.max.toFixed(2)+", "+e.exit.toFixed(2)+")"},t.prototype.decimateValues=function(t,e,i){throw"Error need to implement decimate code"},t}();e.NEWSBaseDecimator=g;var T=function(t){function i(){var e=t.call(this)||this;return e._key=i.KEY,e}return r(i,t),i.prototype.createNewBucket=function(t,e){t.entry=e.y,t.exit=e.y,t.min=e.y,t.max=e.y,t.x=0,t.y=0,t._bucketPts=0,this.addToBucket(t,e)},i.prototype.addToBucket=function(t,e){t.x+=e.x,t.y+=e.y,t.min=Math.min(t.min,e.y),t.max=Math.max(t.max,e.y),t.exit=e.y,t._bucketPts++},i.prototype.finalizeBucket=function(t,e){void 0!==e&&e!==t._bucketPts&&console.log("AverageTime: mismatching pt calculation"),0===t._bucketPts&&console.log("AverageTime: 0 points"),t.x=t.x/t._bucketPts,t.y=t.y/t._bucketPts},i.prototype.decimateValues=function(t,i,a){if(this._buckets=[],0===a.length())return this._buckets;var r,o=e.findFirstInsertionIdx(a,t),n=e.findLastInsertionIdx(a,i);o>0&&--o,n<a.length()&&++n;var u=0;o<a.length()&&(u=Math.floor(this._xValueToCoord(a.get(o).x)),--u);for(var s=o;s<n;++s){var c=a.get(s),l=Math.floor(this._xValueToCoord(c.x));l!==u?(r&&(this.finalizeBucket(r),this._buckets.push(r)),r=new v,this.createNewBucket(r,c),u=l):this.addToBucket(r,c)}return r&&(this.finalizeBucket(r),this._buckets.push(r)),this._buckets},i.KEY="NEWSPointDecimator",i}(g);e.NEWSPointDecimator=T;var C=function(t){function i(e){var a=t.call(this)||this;return a._weightedSums={},a._prevX=0,a._prevX=0,a._key=i.KEY,e&&(a._states=e),a}return r(i,t),i.prototype.createNewBucket=function(t,e){var i;this._weightedSums={},t._bucketPts=0,this._isYObject||(i=e.y,t.x=0,t.y=i,t.entry=i,t.exit=i,t.min=i,t.max=i),this.addToBucket(t,e)},i.prototype.addToStateValueToBucket=function(t,e){0!==e&&(this._weightedSums[t]||(this._weightedSums[t]=0),this._weightedSums[t]+=e)},i.prototype.addToBucket=function(t,e){if(this._isYObject)if(this._states)for(var i in e.y)this.addToStateValueToBucket(this._states[i],(e.x-this._prevX)*e.y[i]);else for(var a in e.y)this.addToStateValueToBucket(a,(e.x-this._prevX)*e.y[a]);else{a=void 0;a=this._states?this._states[e.y]:e.y,t.exit=a,this.addToStateValueToBucket(a,e.x-this._prevX)}t.x+=e.x,t._bucketPts++,this._prevX=e.x},i.prototype.finalizeBucket=function(t,e){var i;void 0!==e&&e!==t._bucketPts&&console.log("AverageTime: mismatching pt calculation"),0===t._bucketPts&&console.log("AverageTime: 0 points"),t.x=t.x/t._bucketPts;var a=-Number.MAX_VALUE,r=-Number.MAX_VALUE,o=Number.MAX_VALUE;for(var n in this._weightedSums){if(void 0!==this._weightedSums[n]){var u=this._weightedSums[n];u>a&&(i=n,a=u)}var s=this._yValueToCoord(n);s>r&&(t.min=n,r=s),s<o&&(t.max=n,o=s)}void 0!==i?t.y=i:this._isYObject||(t.min=t.y,t.max=t.y)},i.prototype.decimateValues=function(t,i,a){if(this._buckets=[],0===a.length())return this._buckets;var r,o=e.findFirstInsertionIdx(a,t),n=e.findLastInsertionIdx(a,i);o>0&&--o,n<a.length()&&++n;var u=0;o<a.length()&&(this._isYObject="object"==typeof a.get(o).y,u=Math.floor(this._xValueToCoord(a.get(o).x)),--u);for(var s=o;s<n;++s){var c=a.get(s),l=Math.floor(this._xValueToCoord(c.x));if(l!==u){if(r&&(this.finalizeBucket(r),this._buckets.push(r)),u+1<l){var d=new v;this.createNewBucket(d,c),this.finalizeBucket(d),d.x=this._xCoordToValue(l-1),this._buckets.push(d),this._prevX=d.x}r=new v,this.createNewBucket(r,c),u=l}else this.addToBucket(r,c)}return r&&(this.finalizeBucket(r),this._buckets.push(r)),this._buckets},i.KEY="NEWSStateDecimator",i}(g);e.NEWSStateDecimator=C;var b=function(){function t(){}return t.prototype.initialize=function(t,e,i){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.setRectLimit=function(t){return this._rectLimit=t,this},t.prototype.decimateValues=function(t,e,i){this._data=[];for(var a=i.getData(),r=0;r<a.length;++r)this._data=this._data.concat(a[r]);return this._rectLimit&&(this._data.sort(function(t,e){return t.traceValue.dx>e.traceValue.dx?-1:t.traceValue.dx<e.traceValue.dx?1:0}),this._data=this._data.splice(0,this._rectLimit)),this._data},t.KEY="FlameChartRectLimitDecimator",t}();e.FlameChartRectLimitDecimator=b;var M=function(){function t(){this._minRectDelta=1}return t.prototype.initialize=function(t,e,i){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.setPixelWidth=function(t){return this._minRectDelta=t-1,this},t.prototype.setUserPixelFunction=function(t){this._userPixelFunction=t},t.prototype.mergeRects=function(t){for(var e=[],i=Math.ceil(this._xValueToCoord(Number.MAX_VALUE))+1,a=[],r=0;r<=i;++r)a.push(this._xCoordToValue(r));var o=0;i>1&&(o=this._xCoordToValue(1)-this._xCoordToValue(0));for(var n=0;n<t.length;++n){for(var u=t[n],s=[],c=void 0,l=-Number.MAX_VALUE,d=void 0,h=void 0,f=u.length,m=0;m<f;m++){var _=u[m];if(c&&c.traceValue.key===_.traceValue.key&&c.traceValue.x+c.traceValue.dx===_.traceValue.x)c.traceValue.dx+=_.traceValue.dx;else{l>(d=Math.floor(this._xValueToCoord(_.traceValue.x)))&&(d=l);var p=void 0;if((h=Math.floor(this._xValueToCoord(_.traceValue.x+_.traceValue.dx)))-d>this._minRectDelta)p={traceValue:{x:a[d],dx:a[h]-a[d],key:_.traceValue.key,name:_.traceValue.name,desc:_.traceValue.desc},decimatedValues:[_.traceValue],depth:_.depth};else{var x={},y=[];for(l=d+this._minRectDelta,_.traceValue.x<a[d]?x[_.traceValue.name]=_.traceValue.x+_.traceValue.dx-a[d]:x[_.traceValue.name]=_.traceValue.dx,y.push(_.traceValue),++m;m<f;++m){if(_=u[m],Math.floor(this._xValueToCoord(_.traceValue.x))>=l){--m;break}if(y.push(_.traceValue),x.hasOwnProperty(_.traceValue.name)||(x[_.traceValue.name]=0),_.traceValue.x+_.traceValue.dx>a[l]){x[_.traceValue.name]+=a[l]-_.traceValue.x,--m;break}x[_.traceValue.name]+=_.traceValue.dx}var V=y[y.length-1];if(1===y.length)p={traceValue:{x:a[d],dx:a[h]-a[d],key:V.key,name:V.name,desc:V.desc},decimatedValues:y,depth:_.depth};else{var v=void 0,g=0;for(var T in x){var C=x[T];C>g&&(v=T,g=C)}p={traceValue:{x:a[d],dx:l<a.length?a[l]-a[d]:a[d]+o,key:"merged",name:v,desc:V.desc},decimatedValues:y,depth:_.depth}}}s.push(p),c=p}}c=void 0;for(m=0;m<s.length;++m){(_=s[m]).traceValue.dx<o&&(_.traceValue.dx=o),this._userPixelFunction&&(_=this._userPixelFunction(_)),c&&c.traceValue.key===_.traceValue.key&&c.traceValue.name===_.traceValue.name?(c.traceValue.dx=_.traceValue.x+_.traceValue.dx-c.traceValue.x,c.decimatedValues.concat(_.decimatedValues)):(e.push(_),c=_)}}return e},t.prototype.decimateValues=function(t,e,i){return this._data=this.mergeRects(i.getData()),this._data},t.KEY="FlameChartMergeRectDecimator",t}();e.FlameChartMergeRectDecimator=M;var k=function(){function t(){}return t.prototype.initialize=function(t,e,i,a){this._decimatedValues=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i,this._states=a},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,i,a){this._decimatedValues=new Array(this._states.length).fill(0).map(function(){return new Array});var r=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(r<0)){var o,n,u={},s={};this._states.forEach(function(t,e){s[t]=e,u[t]=Array.apply(null,Array(r)).map(Number.prototype.valueOf,0)});var c=e.findFirstInsertionIdx(a,t),l=e.findLastInsertionIdx(a,i);c>0&&--c;for(var d=[],h=0;h<=r;++h)d.push(this._xCoordToValue(h));for(var f=1/(d[1]-d[0]),m=c;m<l;++m){n=(o=a.get(m)).x+o.dx;var _=Math.floor(this._xValueToCoord(o.x)),p=Math.floor(this._xValueToCoord(n));if(_===p)u[o.name][_]+=o.dx*f;else{var x=t?Math.max(t,o.x):o.x,y=d[_+1];u[o.name][_]+=(y-x)*f;for(var V=_+1;V<p;++V)u[o.name][V]+=1;var v=i?Math.min(i,n):n,g=d[p];u[o.name][p]+=(v-g)*f}}var T=[];for(h=0;h<r;++h)T[h]={x:d[h],y:0};for(var C=0;C<this._states.length;++C){var b=u[this._states[C]];if(b)for(h=0;h<b.length;++h){var M=u[this._states[C]][h]?u[this._states[C]][h]:0;this._decimatedValues[C][h]={x:d[h],y:100*M}}else this._decimatedValues[C]=T}return this._decimatedValues}},t.KEY="TraceResidencyDecimator",t}();e.TraceResidencyDecimator=k;var D=function(){function t(){}return t.prototype.initialize=function(t,e,i,a){this._decimatedValues=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i,this._states=a},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,i,a){var r=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(r<0)){var o,n,u=e.findFirstInsertionIdx(a,t),s=e.findLastInsertionIdx(a,i);u>0&&--u,this._decimatedValues=[];for(var c=0;c<=r;++c)this._decimatedValues[c]=new v(this._xCoordToValue(c));var l={};this._states.forEach(function(t,e){l[t]=e});for(var d=u;d<s;++d){n=(o=a.get(d)).x+o.dx;var h=Math.floor(this._xValueToCoord(o.x)),f=Math.floor(this._xValueToCoord(n));if(this._decimatedValues[h].entry||(this._decimatedValues[h].entry=l[o.name],this._decimatedValues[h].exit=l[o.name],this._decimatedValues[h].min=l[o.name],this._decimatedValues[h].max=l[o.name]),h===f)this._decimatedValues[h].exit=l[o.name],this._decimatedValues[h].min=Math.min(this._decimatedValues[h].min,l[o.name]),this._decimatedValues[h].max=Math.max(this._decimatedValues[h].max,l[o.name]);else{this._decimatedValues[h].exit=l[o.name],this._decimatedValues[h].min=Math.min(this._decimatedValues[h].min,l[o.name]),this._decimatedValues[h].max=Math.max(this._decimatedValues[h].max,l[o.name]);for(var m=h+1;m<=f;++m)this._decimatedValues[m].entry=l[o.name],this._decimatedValues[m].exit=l[o.name],this._decimatedValues[m].min=l[o.name],this._decimatedValues[m].max=l[o.name]}}for(var _=0;_<this._decimatedValues.length;++_){var p=this._decimatedValues[_],x=p.exit;p.entry=this._states[p.entry],p.exit=this._states[x],p.y=this._states[x],p.min=this._states[p.min],p.max=this._states[p.max]}return this._decimatedValues}},t.KEY="TraceStateDecimator",t}();e.TraceStateDecimator=D;var E=function(){function t(){}return t.prototype.initialize=function(t,e,i){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.mergeMarkers=function(t){for(var e=[],i=-Number.MAX_VALUE,a=0;a<t.length;++a){var r=t[a],o=this._xValueToCoord(r.x);o!==i&&(e.push(r),i=o)}return e},t.prototype.decimateValues=function(t,e,i){var a=i.getData();if(void 0!==t&&void 0!==e){for(var r=[],o=0;o<a.length;++o){var n=a[o];n.x<e&&n.x>t?r.push(n):n.dx&&n.x+n.dx<e&&n.x+n.dx>t&&r.push(n)}this._data=this.mergeMarkers(r)}else this._data=this.mergeMarkers(a);return this._data},t.KEY="SimpleMarkerDecimator",t}();e.SimpleMarkerDecimator=E;var A=function(){function t(){}return t.prototype.initialize=function(t,e,i){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=i},t.prototype.getKey=function(){return x.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,i,a){this._decimatedValues=[];var r=[],o=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(o<0)){for(var n=[],u=0;u<=o+1;++u)n.push(this._xCoordToValue(u));for(var s=0;s<a.length;++s){var c=a[s],l=void 0,d=void 0,h=e.findFirstInsertionIdx(a[s],t),f=e.findLastInsertionIdx(a[s],i);h>0&&--h,f===c.length()&&--f,r[s]=Array.apply(null,Array(o)).map(Number.prototype.valueOf,0);for(var m=h;m<f;++m){l=c.get(m),d=c.get(m+1);var _=Math.floor(this._xValueToCoord(l.x)),p=Math.floor(this._xValueToCoord(d.x)),x=d.x-l.x,y=0===x?0:d.y/x;if(_===p)if(void 0===t||l.x>t&&d.x<i)r[s][_]+=y;else{var V=1/(n[_+1]-n[_]);d.x<i?r[s][_]+=(d.x-n[_])*y*V:r[s][_]+=(n[_+1]-l.x)*y*V}else{V=1/(n[_+1]-n[_]);var v=t?Math.max(t,l.x):l.x,g=n[_+1];r[s][_]+=(g-v)*y*V;for(var T=_+1;T<p;++T)r[s][T]+=y;V=1/(n[p]-n[p-1]);var C=i?Math.min(i,d.x):d.x,b=n[p];r[s][p]+=(C-b)*y*V}}this._decimatedValues[s]=[];var M=r[s];for(u=0;u<M.length;++u)this._decimatedValues[s][u]={x:n[u],y:r[s][u]?r[s][u]:0}}return this._decimatedValues}},t.KEY="XYHeatMapDecimator",t}();e.XYHeatMapDecimator=A;var I=[new y,new c,new d,new h,new _,new M,new b,new T,new C,new E,new f,new V,new x,new k];e.InternalDecimatorMap={},I.forEach(function(t){e.InternalDecimatorMap[t.getKey()]=t})},3:function(e,i){e.exports=t},344:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(45),r=i(2),o=i(25),n=i(3),u=self;u.addEventListener("message",function(t){var e,i,s=t.data;s.xAxis.axisDesc.scaleType===a.AxisType.Ordinal?e=n.scaleBand().range([0,s.xRange]).padding(.1).align(.5).domain(s.xDomain):(s.xAxis.axisDesc.scaleType===a.AxisType.Linear?e=n.scaleLinear().domain(s.xDomain).clamp(!0):s.xAxis.axisDesc.scaleType===a.AxisType.Logarithmic&&(e=n.scaleLog().domain(s.xDomain).clamp(!0)),e.range([0,s.xRange])),s.yAxis&&(s.yAxis.axisDesc.scaleType===a.AxisType.Ordinal?i=n.scaleBand().range([0,s.yRange]).padding(.1).align(.5).domain(s.yDomain):(s.yAxis.axisDesc.scaleType===a.AxisType.Linear?i=n.scaleLinear().domain(s.yDomain).clamp(!0):s.yAxis.axisDesc.scaleType===a.AxisType.Logarithmic&&(i=n.scaleLog().domain(s.yDomain).clamp(!0)),i.range([s.yRange,0])));var c,l=o.InternalDecimatorMap[s.decimatorName];if(l.initialize(e,e.invert,i,s.names),s.names){c=[];for(var d=0;d<s.values.length;++d)c[d]=new r.SimpleBuffer(s.values[d])}else c=new r.SimpleBuffer(s.values);var h=l.decimateValues(s.xStart,s.xEnd,c);u.postMessage(h,void 0)})},45:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Linear=0]="Linear",t[t.Logarithmic=1]="Logarithmic",t[t.Ordinal=2]="Ordinal"}(e.AxisType||(e.AxisType={}))},64:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){return function(t,e){this.x=t,this.y=e}}();e.XYValue=a;var r=function(){return function(t,e,i,a){this.x=t,this.min=e,this.max=i,this.y=a}}();e.MinMaxValue=r;var o=function(){return function(t,e,i,a,r){this.x=t,this.min=e,this.max=i,this.entry=a,this.exit=r}}();e.CandlestickValue=o;var n=function(){function t(t,e){void 0===e&&(e={}),this.key=t,this.data=e}return t.prototype.addValue=function(t,e){var i=this.data;return i.hasOwnProperty(t)?i[t]+=e:i[t]=e,this},t}();e.SummaryValue=n}})});