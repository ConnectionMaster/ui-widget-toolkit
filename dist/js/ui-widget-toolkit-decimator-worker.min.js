!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define("UWT",["d3"],e):"object"==typeof exports?exports.UWT=e(require("d3")):t.UWT=e(t.d3)}(window,(function(t){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(i,r,function(e){return t[e]}.bind(null,r));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=347)}({2:function(t,e,a){"use strict";function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r(t){return function(e,a){return i(t(e),a)}}function o(t){return t||(t=i),1===t.length&&(t=r(t)),{left:function(e,a,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],a)<0?i=o+1:r=o}return i},right:function(e,a,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],a)>0?r=o:i=o+1}return i}}}Object.defineProperty(e,"__esModule",{value:!0}),e.getSelectionName=function(t){return"number"==typeof t?"n"+t:t?(t.length>0&&!isNaN(Number(t[0]))&&(t="z"+t),t=t.replace(/[\*\%\#\[\]\/\>\<\s\+\(\)\;\@\:\?\"=.,]/g,"-")):""},e.removeFromList=function(t,e){if(t){var a=e.indexOf(t);-1!==a&&e.splice(a,1)}},e.bisect=o,e.bucketData=function(t,e,a){for(var i=o().right,r=[],n=0;n<e.length-1;++n)r[n]=[];var u=e[0],s=e[e.length-1],c=e.slice(1);for(n=0;n<t.length;++n){var l=a(t[n]);if(!(l<u||l>s))r[i(c,l)].push(t[n])}var d={};for(n=0;n<e.length-1;++n){d[e[n]+"-"+e[n+1]]=r[n]}return d},e.copy=function(t){var e={};for(var a in t)e[a]=t[a];return e},e.merge=function(t,e){for(var a in e)t[a]=e[a]},e.convertTraceToTrees=function(t){for(var e=[],a=[],i=[],r=0;r<t.length;r++){for(var o=t[r],n=a[a.length-1];a.length&&o.x>n.x+n.dx;)--a.length,--i.length,n=a[a.length-1];var u=i[i.length-1],s={key:o.key,value:o.dx,children:[],parent:u};o.name&&(s.name=o.name),u?u.children.push(s):e.push(s),a.push(o),i.push(s)}return e};var n=function(){function t(t){this._data=t||[]}return t.prototype.push=function(t){this._data.push(t)},t.prototype.get=function(t){return this._data[t]},t.prototype.length=function(){return this._data.length},t.prototype.getData=function(){return this._data},t}();e.SimpleBuffer=n;var u=function(){function t(t){this._data=new Array(t),this._startIdx=0,this._count=0,this._isRotating=!1}return t.prototype.push=function(t){this._isRotating?(this._data[this._startIdx]=t,++this._startIdx,this._startIdx===this._count&&(this._startIdx=0),this._isRotating=!0):this._count===this._data.length-1?(this._data[this._count]=t,++this._count,this._isRotating=!0):(this._data[this._count]=t,++this._count)},t.prototype.get=function(t){return this._isRotating&&(t+=this._startIdx)>=this._count&&(t-=this._count),this._data[t]},t.prototype.length=function(){return this._count},t.prototype.getData=function(){if(this._isRotating){for(var t=[],e=this._startIdx;e<this._data.length;++e)t.push(this._data[e]);for(e=0;e<this._startIdx;++e)t.push(this._data[e]);return t}return this._data},t}();e.RingBuffer=u,e.bisectBuffer=function(t){return t||(t=i),1===t.length&&(t=r(t)),{left:function(e,a,i,r){for(null==i&&(i=0),null==r&&(r=e.length());i<r;){var o=i+r>>>1;t(e.get(o),a)<0?i=o+1:r=o}return i},right:function(e,a,i,r){for(null==i&&(i=0),null==r&&(r=e.length());i<r;){var o=i+r>>>1;t(e.get(o),a)>0?r=o:i=o+1}return i}}},e.transposeKeys=function(t){var e={};function a(t,i,r,o){for(var n=[],u=0;u<i.length;++u)n[u]=i[u];if(n.push(r.key),Array.isArray(r.data))for(u=0;u<r.data.length;++u)a(t,n,r.data[u],o+1);else for(var s=t,c=n.length-1;c>=0;--c){var l=n[c],d=void 0;e.hasOwnProperty(l)?d=e[l]:(d=s.length,e[l]=d),s[d]||(s[d]={key:l,data:[]}),0===c?s[d].data=r.data:s=s[d].data}}for(var i=[],r=0;r<t.length;++r)a(i,[],t[r],0);return i},e.runFunctionOnLeaf=function t(e,a){if(e&&e.children&&e.children.length>0)for(var i=0;i<e.children.length;++i)t(e.children[i],a);else a(e)},e.isOverlapping=function(t,e){return t.x<=e.right&&t.right>=e.x&&t.y<=e.bottom&&t.bottom>=e.y}},25:function(t,e,a){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)});Object.defineProperty(e,"__esModule",{value:!0});var o=a(68),n=a(2);e.findFirstInsertionIdx=n.bisectBuffer((function(t){return t.x})).left,e.findLastInsertionIdx=n.bisectBuffer((function(t){return t.x})).right;var u=function(){function t(){this._values=[]}return t.prototype.initialize=function(t,e,a){},t.prototype.getKey=function(){return""},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._values},t.prototype.decimateValues=function(t,e,a){var i=this;return Array.isArray(a)?a.forEach((function(t){i._values.push(t.getData())})):this._values=a.getData(),this._values},t}();e.XYDummyDecimator=u;var s=function(){function t(){this._name="Simple Unimplemented Decimator"}return t.prototype.initialize=function(t,e,a){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return this._name},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,a,i){if(this._decimatedValues=[],0===i.length())return this._decimatedValues;var r,o,n=e.findFirstInsertionIdx(i,t),u=e.findLastInsertionIdx(i,a);n>0&&--n,u<i.length()&&++u,n<i.length()&&(r=Math.floor(this._xValueToCoord(i.get(n).x)),--r),o=t?Math.floor(this._xValueToCoord(t)):Math.floor(this._xValueToCoord(i.get(n).x));for(var s,c=n,l=n;l<u;++l){var d=i.get(l),h=Math.floor(this._xValueToCoord(d.x));s=l,h!==r&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(i,c,s,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(o),this._xCoordToValue(h))),o=h,r=h,c=s)}return c!==i.length()&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(i,c,s+1,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(o),Number.MAX_VALUE))),this._decimatedValues},t}();e.CustomPointXYDecimator=s;var c=function(t){function e(){var a=t.call(this)||this;return a._key=e.KEY,a._name="Min",a._customFunc=function(t,e,a,i){if(t.length()>0&&e!==a){for(var r=Number.MAX_VALUE,o=void 0,n=e;n<a;++n){var u=t.get(n),s=u.y;s<r&&(o=u,r=s)}return[o]}return[]},a}return r(e,t),e.KEY="MinPointDecimator",e}(s);function l(t,e,a,i){if(t.length()>0&&e!==a){for(var r=0,n=e;n<a;++n){r+=t.get(n).y}return[new o.XYValue(t.get(a-1).x,r/(a-e))]}return[]}e.MinPointDecimator=c;var d=function(t){function e(){var a=t.call(this)||this;return a._key=e.KEY,a._name="Avg",a._customFunc=l,a}return r(e,t),e.KEY="AvgPointDecimator",e}(s);e.AvgPointDecimator=d;var h=function(t){function e(){var a=t.call(this)||this;return a._key=e.KEY,a._name="Max",a._customFunc=function(t,e,a,i){if(t.length()>0&&e!==a){for(var r=-Number.MAX_VALUE,o=void 0,n=e;n<a;++n){var u=t.get(n),s=u.y;s>r&&(o=u,r=s)}return[o]}return[]},a}return r(e,t),e.KEY="MaxPointDecimator",e}(s);e.MaxPointDecimator=h;var f=function(t){function e(){var a=t.call(this)||this;return a._key=e.KEY,a._name="XYPointDecimator",a._customFunc=function(t,e,a,i){for(var r={},o=[],n=e;n<a;++n){var u=t.get(n),s=Math.floor(i(u.y));r.hasOwnProperty(s.toString())||(o.push(u),r[s]=!0)}return o},a}return r(e,t),e.KEY="XYPointDecimator",e}(s);e.XYPointDecimator=f;var m=function(){function t(){this._name="Simple Unimplemented Decimator"}return t.prototype.initialize=function(t,e,a){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return this._name},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,a,i){if(this._decimatedValues=[],0===i.length())return this._decimatedValues;var r,o,n=e.findFirstInsertionIdx(i,t),u=e.findLastInsertionIdx(i,a);n>0&&--n,u<i.length()&&++u,n<i.length()&&(r=Math.floor(this._xValueToCoord(i.get(n).x)),--r),o=t?this._xValueToCoord(t):n;for(var s=n,c=n;c<u;++c){var l=i.get(c),d=Math.floor(this._xValueToCoord(l.x)),h=c+1;d!==r&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(i,s,h,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(o),this._xCoordToValue(d))),o=d,r=d,s=h)}return s!==i.length()&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(i,s,s+1,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(o),Number.MAX_VALUE))),this._decimatedValues},t}();e.CustomContinuousXYDecimator=m;var _=function(t){function e(){var a=t.call(this)||this;return a._key=e.KEY,a._name="Avg",a._customFunc=l,a}return r(e,t),e.KEY="AvgContinuousDecimator",e}(m);function p(t,a,i,r,o,n){var u=[],s=[],c=Math.ceil(t(Number.MAX_VALUE));if(!(c<0)){for(var l=[],d=0;d<=c+1;++d)l.push(a(d));for(var h=0;h<n.length;++h){var f=n[h],m=void 0,_=void 0,p=e.findFirstInsertionIdx(n[h],r),x=e.findLastInsertionIdx(n[h],o);p>0&&--p,x===f.length()&&--x,s[h]=Array.apply(null,Array(c)).map(Number.prototype.valueOf,0);for(var y=p;y<x;++y){m=f.get(y),_=f.get(y+1);var V=Math.floor(t(m.x)),v=Math.floor(t(_.x)),g=_.x-m.x,T=0===g?0:_.y/g;if(V===v)if(void 0===r||m.x>r&&_.x<o)s[h][V]+=T;else{var C=1/(l[V+1]-l[V]);_.x<o?s[h][V]+=(_.x-l[V])*T*C:s[h][V]+=(l[V+1]-m.x)*T*C}else{C=1/(l[V+1]-l[V]);var M=r?Math.max(r,m.x):m.x,k=l[V+1];s[h][V]+=(k-M)*T*C;for(var b=V+1;b<v;++b)s[h][b]+=T;C=1/(l[v]-l[v-1]);var D=o?Math.min(o,_.x):_.x,A=l[v];s[h][v]+=(D-A)*T*C}}u[h]=[];var E=s[h];for(d=0;d<E.length;++d)u[h][d]={x:l[d],y:s[h][d]}}return u}}e.AvgContinuousDecimator=_,e.sumMultiXYSeriesValues=p;var x=function(){function t(){}return t.prototype.initialize=function(t,e,a){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,e,a){return this._decimatedValues=p(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,a),this._decimatedValues},t.KEY="SummedValueMultiXYSeriesDecimator",t}();e.SummedValueMultiXYSeriesDecimator=x;var y=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.getKey=function(){return e.KEY},e.prototype.getName=function(){return""},e.prototype.decimateValues=function(t,e,a){this._decimatedValues=p(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,a);for(var i=0;i<this._decimatedValues[0].length;++i){for(var r=0,o=0;o<this._decimatedValues.length;++o)this._decimatedValues[o][i].y&&(r+=this._decimatedValues[o][i].y);if(r>0){var n=100/r;for(o=0;o<a.length;++o)this._decimatedValues[o][i].y&&(this._decimatedValues[o][i].y=this._decimatedValues[o][i].y*n)}}return this._decimatedValues},e.KEY="ResidencyDecimator",e}(x);e.ResidencyDecimator=y;var V=function(){function t(){}return t.prototype.initialize=function(t,e,a){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,e,a){return this._decimatedValues=p(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,[a])[0],this._decimatedValues},t.KEY="SummedValueXYSeriesDecimator",t}();e.SummedValueXYSeriesDecimator=V;var v=function(t){function e(e){var a=t.call(this,e,void 0,void 0,void 0,void 0)||this;return a._bucketPts=0,a}return r(e,t),e}(o.CandlestickValue);e.NEWSDecimationValue=v;var g=function(){function t(){}return t.prototype.initialize=function(t,e,a){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._buckets},t.prototype._dumpBucket=function(t,e,a){var i="valuesInBucket = "+a.toFixed(0)+", ";return i+="([avg]Time delta, avgValue) = ("+(e.x-t).toFixed(2)+", "+e.y.toFixed(2)+"), ",i+="(entry, min, max, exit) = ("+e.entry.toFixed(2)+", "+e.min.toFixed(2)+", "+e.max.toFixed(2)+", "+e.exit.toFixed(2)+")"},t.prototype.decimateValues=function(t,e,a){throw"Error need to implement decimate code"},t}();e.NEWSBaseDecimator=g;var T=function(t){function a(){var e=t.call(this)||this;return e._key=a.KEY,e}return r(a,t),a.prototype.createNewBucket=function(t,e){t.entry=e.y,t.exit=e.y,t.min=e.y,t.max=e.y,t.x=0,t.y=0,t._bucketPts=0,this.addToBucket(t,e)},a.prototype.addToBucket=function(t,e){t.x+=e.x,t.y+=e.y,t.min=Math.min(t.min,e.y),t.max=Math.max(t.max,e.y),t.exit=e.y,t._bucketPts++},a.prototype.finalizeBucket=function(t,e){void 0!==e&&e!==t._bucketPts&&console.log("AverageTime: mismatching pt calculation"),0===t._bucketPts&&console.log("AverageTime: 0 points"),t.x=t.x/t._bucketPts,t.y=t.y/t._bucketPts},a.prototype.decimateValues=function(t,a,i){if(this._buckets=[],0===i.length())return this._buckets;var r,o=e.findFirstInsertionIdx(i,t),n=e.findLastInsertionIdx(i,a);o>0&&--o,n<i.length()&&++n;var u=0;o<i.length()&&(u=Math.floor(this._xValueToCoord(i.get(o).x)),--u);for(var s=o;s<n;++s){var c=i.get(s),l=Math.floor(this._xValueToCoord(c.x));l!==u?(r&&(this.finalizeBucket(r),this._buckets.push(r)),r=new v,this.createNewBucket(r,c),u=l):this.addToBucket(r,c)}return r&&(this.finalizeBucket(r),this._buckets.push(r)),this._buckets},a.KEY="NEWSPointDecimator",a}(g);e.NEWSPointDecimator=T;var C=function(t){function a(e){var i=t.call(this)||this;return i._weightedSums={},i._prevX=0,i._prevX=0,i._key=a.KEY,e&&(i._states=e),i}return r(a,t),a.prototype.createNewBucket=function(t,e){var a;this._weightedSums={},t._bucketPts=0,this._isYObject||(a=e.y,t.x=0,t.y=a,t.entry=a,t.exit=a,t.min=a,t.max=a),this.addToBucket(t,e)},a.prototype.addToStateValueToBucket=function(t,e){0!==e&&(this._weightedSums[t]||(this._weightedSums[t]=0),this._weightedSums[t]+=e)},a.prototype.addToBucket=function(t,e){if(this._isYObject)if(this._states)for(var a in e.y)this.addToStateValueToBucket(this._states[a],(e.x-this._prevX)*e.y[a]);else for(var i in e.y)this.addToStateValueToBucket(i,(e.x-this._prevX)*e.y[i]);else{i=void 0;i=this._states?this._states[e.y]:e.y,t.exit=i,this.addToStateValueToBucket(i,e.x-this._prevX)}t.x+=e.x,t._bucketPts++,this._prevX=e.x},a.prototype.finalizeBucket=function(t,e){var a;void 0!==e&&e!==t._bucketPts&&console.log("AverageTime: mismatching pt calculation"),0===t._bucketPts&&console.log("AverageTime: 0 points"),t.x=t.x/t._bucketPts;var i=-Number.MAX_VALUE,r=-Number.MAX_VALUE,o=Number.MAX_VALUE;for(var n in this._weightedSums){if(void 0!==this._weightedSums[n]){var u=this._weightedSums[n];u>i&&(a=n,i=u)}var s=this._yValueToCoord(n);s>r&&(t.min=n,r=s),s<o&&(t.max=n,o=s)}void 0!==a?t.y=a:this._isYObject||(t.min=t.y,t.max=t.y)},a.prototype.decimateValues=function(t,a,i){if(this._buckets=[],0===i.length())return this._buckets;var r,o=e.findFirstInsertionIdx(i,t),n=e.findLastInsertionIdx(i,a);o>0&&--o,n<i.length()&&++n;var u=0;o<i.length()&&(this._isYObject="object"==typeof i.get(o).y,u=Math.floor(this._xValueToCoord(i.get(o).x)),--u);for(var s=o;s<n;++s){var c=i.get(s),l=Math.floor(this._xValueToCoord(c.x));if(l!==u){if(r&&(this.finalizeBucket(r),this._buckets.push(r)),u+1<l){var d=new v;this.createNewBucket(d,c),this.finalizeBucket(d),d.x=this._xCoordToValue(l-1),this._buckets.push(d),this._prevX=d.x}r=new v,this.createNewBucket(r,c),u=l}else this.addToBucket(r,c)}return r&&(this.finalizeBucket(r),this._buckets.push(r)),this._buckets},a.KEY="NEWSStateDecimator",a}(g);e.NEWSStateDecimator=C;var M=function(){function t(){}return t.prototype.initialize=function(t,e,a){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.setRectLimit=function(t){return this._rectLimit=t,this},t.prototype.decimateValues=function(t,e,a){this._data=[];for(var i=a.getData(),r=0;r<i.length;++r)this._data=this._data.concat(i[r]);return this._rectLimit&&(this._data.sort((function(t,e){return t.traceValue.dx>e.traceValue.dx?-1:t.traceValue.dx<e.traceValue.dx?1:0})),this._data=this._data.splice(0,this._rectLimit)),this._data},t.KEY="FlameChartRectLimitDecimator",t}();e.FlameChartRectLimitDecimator=M;var k=function(){function t(){this._minRectDelta=1}return t.prototype.initialize=function(t,e,a){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.setPixelWidth=function(t){return this._minRectDelta=t-1,this},t.prototype.setUserPixelFunction=function(t){this._userPixelFunction=t},t.prototype.mergeRects=function(t){for(var e=[],a=Math.ceil(this._xValueToCoord(Number.MAX_VALUE))+1,i=[],r=0;r<=a;++r)i.push(this._xCoordToValue(r));var o=0;a>1&&(o=this._xCoordToValue(1)-this._xCoordToValue(0));for(var n=0;n<t.length;++n){var u=t[n];if(void 0!==u){for(var s=[],c=void 0,l=-Number.MAX_VALUE,d=void 0,h=void 0,f=u.length,m=0;m<f;m++){var _=u[m];if(c&&c.traceValue.key===_.traceValue.key&&c.traceValue.x+c.traceValue.dx===_.traceValue.x)c.traceValue.dx+=_.traceValue.dx;else{l>(d=Math.floor(this._xValueToCoord(_.traceValue.x)))&&(d=l);var p=void 0;if((h=Math.floor(this._xValueToCoord(_.traceValue.x+_.traceValue.dx)))-d>this._minRectDelta)p={traceValue:{x:i[d],dx:i[h]-i[d],key:_.traceValue.key,name:_.traceValue.name,desc:_.traceValue.desc},decimatedValues:[_.traceValue],depth:_.depth};else{var x={},y=[];for(l=d+this._minRectDelta,_.traceValue.x<i[d]?x[_.traceValue.name]=_.traceValue.x+_.traceValue.dx-i[d]:x[_.traceValue.name]=_.traceValue.dx,y.push(_.traceValue),++m;m<f;++m){if(_=u[m],Math.floor(this._xValueToCoord(_.traceValue.x))>=l){--m;break}if(y.push(_.traceValue),x.hasOwnProperty(_.traceValue.name)||(x[_.traceValue.name]=0),_.traceValue.x+_.traceValue.dx>i[l]){x[_.traceValue.name]+=i[l]-_.traceValue.x,--m;break}x[_.traceValue.name]+=_.traceValue.dx}var V=y[y.length-1];if(1===y.length)p={traceValue:{x:i[d],dx:i[h]-i[d],key:V.key,name:V.name,desc:V.desc},decimatedValues:y,depth:_.depth};else{var v=void 0,g=0;for(var T in x){var C=x[T];C>g&&(v=T,g=C)}p={traceValue:{x:i[d],dx:l<i.length?i[l]-i[d]:i[d]+o,key:"merged",name:v,desc:V.desc},decimatedValues:y,depth:_.depth}}}s.push(p),c=p}}c=void 0;var M=!0;for(m=0;m<s.length;++m){M=!0,(_=s[m]).traceValue.dx<o&&(_.traceValue.dx=o),this._userPixelFunction&&(_=this._userPixelFunction(_)),c&&c.traceValue.key===_.traceValue.key&&c.traceValue.name===_.traceValue.name&&c.traceValue.x+c.traceValue.dx>=_.traceValue.x&&(c.traceValue.dx=_.traceValue.x+_.traceValue.dx-c.traceValue.x,c.decimatedValues.concat(_.decimatedValues),M=!1),M&&(e.push(_),c=_)}}}return e},t.prototype.decimateValues=function(t,e,a){return this._data=this.mergeRects(a.getData()),this._data},t.KEY="FlameChartMergeRectDecimator",t}();e.FlameChartMergeRectDecimator=k;var b=function(){function t(){}return t.prototype.initialize=function(t,e,a,i){this._decimatedValues=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a,this._states=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,a,i){this._decimatedValues=new Array(this._states.length).fill(0).map((function(){return new Array}));var r=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(r<0)){var o,n,u={},s={};this._states.forEach((function(t,e){s[t]=e,u[t]=Array.apply(null,Array(r)).map(Number.prototype.valueOf,0)}));var c=e.findFirstInsertionIdx(i,t),l=e.findLastInsertionIdx(i,a);c>0&&--c;for(var d=[],h=0;h<=r;++h)d.push(this._xCoordToValue(h));for(var f=1/(d[1]-d[0]),m=c;m<l;++m){n=(o=i.get(m)).x+o.dx;var _=Math.floor(this._xValueToCoord(o.x)),p=Math.floor(this._xValueToCoord(n));if(_===p)u[o.name][_]+=o.dx*f;else{var x=t?Math.max(t,o.x):o.x,y=d[_+1];u[o.name][_]+=(y-x)*f;for(var V=_+1;V<p;++V)u[o.name][V]+=1;var v=a?Math.min(a,n):n,g=d[p];u[o.name][p]+=(v-g)*f}}var T=[];for(h=0;h<r;++h)T[h]={x:d[h],y:0};for(var C=0;C<this._states.length;++C){var M=u[this._states[C]];if(M)for(h=0;h<M.length;++h){var k=u[this._states[C]][h]?u[this._states[C]][h]:0;this._decimatedValues[C][h]={x:d[h],y:100*k}}else this._decimatedValues[C]=T}return this._decimatedValues}},t.KEY="TraceResidencyDecimator",t}();e.TraceResidencyDecimator=b;var D=function(){function t(){}return t.prototype.initialize=function(t,e,a,i){this._decimatedValues=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a,this._states=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,a,i){var r=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(r<0)){var o,n,u=e.findFirstInsertionIdx(i,t),s=e.findLastInsertionIdx(i,a);u>0&&--u,this._decimatedValues=[];for(var c=0;c<=r;++c)this._decimatedValues[c]=new v(this._xCoordToValue(c));var l={};this._states.forEach((function(t,e){l[t]=e}));for(var d=u;d<s;++d){n=(o=i.get(d)).x+o.dx;var h=Math.floor(this._xValueToCoord(o.x)),f=Math.floor(this._xValueToCoord(n));if(this._decimatedValues[h].entry||(this._decimatedValues[h].entry=l[o.name],this._decimatedValues[h].exit=l[o.name],this._decimatedValues[h].min=l[o.name],this._decimatedValues[h].max=l[o.name]),h===f)this._decimatedValues[h].exit=l[o.name],this._decimatedValues[h].min=Math.min(this._decimatedValues[h].min,l[o.name]),this._decimatedValues[h].max=Math.max(this._decimatedValues[h].max,l[o.name]);else{this._decimatedValues[h].exit=l[o.name],this._decimatedValues[h].min=Math.min(this._decimatedValues[h].min,l[o.name]),this._decimatedValues[h].max=Math.max(this._decimatedValues[h].max,l[o.name]);for(var m=h+1;m<=f;++m)this._decimatedValues[m].entry=l[o.name],this._decimatedValues[m].exit=l[o.name],this._decimatedValues[m].min=l[o.name],this._decimatedValues[m].max=l[o.name]}}for(var _=0;_<this._decimatedValues.length;++_){var p=this._decimatedValues[_],x=p.exit;p.entry=this._states[p.entry],p.exit=this._states[x],p.y=this._states[x],p.min=this._states[p.min],p.max=this._states[p.max]}return this._decimatedValues}},t.KEY="TraceStateDecimator",t}();e.TraceStateDecimator=D;var A=function(){function t(){}return t.prototype.initialize=function(t,e,a){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.mergeMarkers=function(t){for(var e=[],a=-Number.MAX_VALUE,i=0;i<t.length;++i){var r=t[i],o=this._xValueToCoord(r.x);o!==a&&(e.push(r),a=o)}return e},t.prototype.decimateValues=function(t,e,a){var i=a.getData();if(void 0!==t&&void 0!==e){for(var r=[],o=0;o<i.length;++o){var n=i[o];n.x<e&&n.x>t?r.push(n):n.dx&&n.x+n.dx<e&&n.x+n.dx>t&&r.push(n)}this._data=this.mergeMarkers(r)}else this._data=this.mergeMarkers(i);return this._data},t.KEY="SimpleMarkerDecimator",t}();e.SimpleMarkerDecimator=A;var E=function(){function t(){}return t.prototype.initialize=function(t,e,a){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=a},t.prototype.getKey=function(){return x.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,a,i){this._decimatedValues=[];var r=[],o=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(o<0)){for(var n=[],u=0;u<=o+1;++u)n.push(this._xCoordToValue(u));for(var s=0;s<i.length;++s){var c=i[s],l=void 0,d=void 0,h=e.findFirstInsertionIdx(i[s],t),f=e.findLastInsertionIdx(i[s],a);h>0&&--h,f===c.length()&&--f,r[s]=Array.apply(null,Array(o)).map(Number.prototype.valueOf,0);for(var m=h;m<f;++m){l=c.get(m),d=c.get(m+1);var _=Math.floor(this._xValueToCoord(l.x)),p=Math.floor(this._xValueToCoord(d.x)),x=d.x-l.x,y=0===x?0:d.y/x;if(_===p)if(void 0===t||l.x>t&&d.x<a)r[s][_]+=y;else{var V=1/(n[_+1]-n[_]);d.x<a?r[s][_]+=(d.x-n[_])*y*V:r[s][_]+=(n[_+1]-l.x)*y*V}else{V=1/(n[_+1]-n[_]);var v=t?Math.max(t,l.x):l.x,g=n[_+1];r[s][_]+=(g-v)*y*V;for(var T=_+1;T<p;++T)r[s][T]+=y;V=1/(n[p]-n[p-1]);var C=a?Math.min(a,d.x):d.x,M=n[p];r[s][p]+=(C-M)*y*V}}this._decimatedValues[s]=[];var k=r[s];for(u=0;u<k.length;++u)this._decimatedValues[s][u]={x:n[u],y:r[s][u]?r[s][u]:0}}return this._decimatedValues}},t.KEY="XYHeatMapDecimator",t}();e.XYHeatMapDecimator=E;var Y=[new y,new c,new d,new h,new _,new k,new M,new T,new C,new A,new f,new V,new x,new b];e.InternalDecimatorMap={},Y.forEach((function(t){e.InternalDecimatorMap[t.getKey()]=t}))},3:function(e,a){e.exports=t},347:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(49),r=a(2),o=a(25),n=a(3),u=self;u.addEventListener("message",(function(t){var e,a,s=t.data;s.xAxis.axisDesc.scaleType===i.AxisType.Ordinal?e=n.scaleBand().range([0,s.xRange]).padding(.1).align(.5).domain(s.xDomain):(s.xAxis.axisDesc.scaleType===i.AxisType.Linear?e=n.scaleLinear().domain(s.xDomain).clamp(!0):s.xAxis.axisDesc.scaleType===i.AxisType.Logarithmic&&(e=n.scaleLog().domain(s.xDomain).clamp(!0)),e.range([0,s.xRange])),s.yAxis&&(s.yAxis.axisDesc.scaleType===i.AxisType.Ordinal?a=n.scaleBand().range([0,s.yRange]).padding(.1).align(.5).domain(s.yDomain):(s.yAxis.axisDesc.scaleType===i.AxisType.Linear?a=n.scaleLinear().domain(s.yDomain).clamp(!0):s.yAxis.axisDesc.scaleType===i.AxisType.Logarithmic&&(a=n.scaleLog().domain(s.yDomain).clamp(!0)),a.range([s.yRange,0])));var c,l=o.InternalDecimatorMap[s.decimatorName];if(l.initialize(e,e.invert,a,s.names),s.names){c=[];for(var d=0;d<s.values.length;++d)c[d]=new r.SimpleBuffer(s.values[d])}else c=new r.SimpleBuffer(s.values);var h=l.decimateValues(s.xStart,s.xEnd,c);u.postMessage(h,void 0)}))},49:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Linear=0]="Linear",t[t.Logarithmic=1]="Logarithmic",t[t.Ordinal=2]="Ordinal"}(e.AxisType||(e.AxisType={}))},68:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){this.x=t,this.y=e};e.XYValue=i;var r=function(t,e,a,i){this.x=t,this.min=e,this.max=a,this.y=i};e.MinMaxValue=r;var o=function(t,e,a,i,r){this.x=t,this.min=e,this.max=a,this.entry=i,this.exit=r};e.CandlestickValue=o;var n=function(){function t(t,e){void 0===e&&(e={}),this.key=t,this.data=e}return t.prototype.addValue=function(t,e){var a=this.data;return a.hasOwnProperty(t)?a[t]+=e:a[t]=e,this},t}();e.SummaryValue=n}})}));