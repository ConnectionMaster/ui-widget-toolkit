!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define("UWT",["d3"],e):"object"==typeof exports?exports.UWT=e(require("d3")):t.UWT=e(t.d3)}(window,function(t){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=346)}({2:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(28);function n(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return i.polyfill(),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){i.polyfill(),String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t});var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}function o(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function a(t){return function(e,r){return o(t(e),r)}}function u(t){return t||(t=o),1===t.length&&(t=a(t)),{left:function(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){var o=i+n>>>1;t(e[o],r)<0?i=o+1:n=o}return i},right:function(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length);i<n;){var o=i+n>>>1;t(e[o],r)>0?n=o:i=o+1}return i}}}e.getSelectionName=function(t){return"number"==typeof t?"n"+t:t?(t.length>0&&!isNaN(Number(t[0]))&&(t="z"+t),t=t.replace(/[\*\%\#\[\]\/\>\<\s\+\(\)\;\@\:\?\"=.,]/g,"-")):""},e.detectIE=n,document.addEventListener("DOMContentLoaded",function(){n()},!1),e.useIEPolyfill=function(t){try{new CustomEvent("test")}catch(r){var e=function(e,r){r=r||{bubbles:!1,cancelable:!1};var i=document.createEvent("MouseEvent");return i.initMouseEvent(e,r.bubbles,r.cancelable,t,0,0,0,0,0,!1,!1,!1,!1,0,null),i};e.prototype=Event.prototype,t.MouseEvent=e}},e.removeFromList=function(t,e){if(t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},e.bisect=u,e.bucketData=function(t,e,r){for(var i=u().right,n=[],o=0;o<e.length-1;++o)n[o]=[];var a=e[0],s=e[e.length-1],c=e.slice(1);for(o=0;o<t.length;++o){var l=r(t[o]);l<a||l>s||n[i(c,l)].push(t[o])}var h={};for(o=0;o<e.length-1;++o)h[e[o]+"-"+e[o+1]]=n[o];return h},e.copy=function(t){var e={};for(var r in t)e[r]=t[r];return e},e.merge=function(t,e){for(var r in e)t[r]=e[r]},e.convertTraceToTrees=function(t){for(var e=[],r=[],i=[],n=0;n<t.length;n++){for(var o=t[n],a=r[r.length-1];r.length&&o.x>a.x+a.dx;)--r.length,--i.length,a=r[r.length-1];var u=i[i.length-1],s={key:o.key,value:o.dx,children:[],parent:u};o.name&&(s.name=o.name),u?u.children.push(s):e.push(s),r.push(o),i.push(s)}return e};var s=function(){function t(t){this._data=t||[]}return t.prototype.push=function(t){this._data.push(t)},t.prototype.get=function(t){return this._data[t]},t.prototype.length=function(){return this._data.length},t.prototype.getData=function(){return this._data},t}();e.SimpleBuffer=s;var c=function(){function t(t){this._data=new Array(t),this._startIdx=0,this._count=0,this._isRotating=!1}return t.prototype.push=function(t){this._isRotating?(this._data[this._startIdx]=t,++this._startIdx,this._startIdx===this._count&&(this._startIdx=0),this._isRotating=!0):this._count===this._data.length-1?(this._data[this._count]=t,++this._count,this._isRotating=!0):(this._data[this._count]=t,++this._count)},t.prototype.get=function(t){return this._isRotating&&(t+=this._startIdx)>=this._count&&(t-=this._count),this._data[t]},t.prototype.length=function(){return this._count},t.prototype.getData=function(){if(this._isRotating){for(var t=[],e=this._startIdx;e<this._data.length;++e)t.push(this._data[e]);for(e=0;e<this._startIdx;++e)t.push(this._data[e]);return t}return this._data},t}();e.RingBuffer=c,e.bisectBuffer=function(t){return t||(t=o),1===t.length&&(t=a(t)),{left:function(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length());i<n;){var o=i+n>>>1;t(e.get(o),r)<0?i=o+1:n=o}return i},right:function(e,r,i,n){for(null==i&&(i=0),null==n&&(n=e.length());i<n;){var o=i+n>>>1;t(e.get(o),r)>0?n=o:i=o+1}return i}}},e.transposeKeys=function(t){var e={};function r(t,i,n,o){for(var a=[],u=0;u<i.length;++u)a[u]=i[u];if(a.push(n.key),Array.isArray(n.data))for(u=0;u<n.data.length;++u)r(t,a,n.data[u],o+1);else for(var s=t,c=a.length-1;c>=0;--c){var l=a[c],h=void 0;e.hasOwnProperty(l)?h=e[l]:(h=s.length,e[l]=h),s[h]||(s[h]={key:l,data:[]}),0===c?s[h].data=n.data:s=s[h].data}}for(var i=[],n=0;n<t.length;++n)r(i,[],t[n],0);return i},e.runFunctionOnLeaf=function t(e,r){if(e&&e.children&&e.children.length>0)for(var i=0;i<e.children.length;++i)t(e.children[i],r);else r(e)},e.isOverlapping=function(t,e){return t.x<=e.right&&t.right>=e.x&&t.y<=e.bottom&&t.bottom>=e.y}},22:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},26:function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(67),a=r(2);e.findFirstInsertionIdx=a.bisectBuffer(function(t){return t.x}).left,e.findLastInsertionIdx=a.bisectBuffer(function(t){return t.x}).right;var u=function(){function t(){this._values=[]}return t.prototype.initialize=function(t,e,r){},t.prototype.getKey=function(){return""},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._values},t.prototype.decimateValues=function(t,e,r){var i=this;return Array.isArray(r)?r.forEach(function(t){i._values.push(t.getData())}):this._values=r.getData(),this._values},t}();e.XYDummyDecimator=u;var s=function(){function t(){this._name="Simple Unimplemented Decimator"}return t.prototype.initialize=function(t,e,r){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return this._name},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,r,i){if(this._decimatedValues=[],0===i.length())return this._decimatedValues;var n,o=e.findFirstInsertionIdx(i,t),a=e.findLastInsertionIdx(i,r);o>0&&--o,a<i.length()&&++a,n=t?Math.floor(this._xValueToCoord(t)):Math.floor(this._xValueToCoord(i.get(o).x));for(var u,s=o,c=o;c<a;++c){var l=i.get(c),h=Math.floor(this._xValueToCoord(l.x));u=c,h!==n&&(void 0===r||l.x<r&&l.x>t)&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(i,s,u,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(n),this._xCoordToValue(h))),n=h,s=u)}return s!==i.length()&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(i,s,u+1,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(n),this._xCoordToValue(void 0)))),this._decimatedValues},t}();e.CustomPointXYDecimator=s;var c=function(t){function e(){var r=t.call(this)||this;return r._key=e.KEY,r._name="Min",r._customFunc=function(t,e,r,i){if(t.length()>0&&e!==r){for(var n=Number.MAX_VALUE,o=void 0,a=e;a<r;++a){var u=t.get(a),s=u.y;s<n&&(o=u,n=s)}return[o]}return[]},r}return n(e,t),e.KEY="MinPointDecimator",e}(s);function l(t,e,r,i){if(t.length()>0&&e!==r){for(var n=0,a=e;a<r;++a){n+=t.get(a).y}return[new o.XYValue(t.get(r-1).x,n/(r-e))]}return[]}e.MinPointDecimator=c;var h=function(t){function e(){var r=t.call(this)||this;return r._key=e.KEY,r._name="Avg",r._customFunc=l,r}return n(e,t),e.KEY="AvgPointDecimator",e}(s);e.AvgPointDecimator=h;var d=function(t){function e(){var r=t.call(this)||this;return r._key=e.KEY,r._name="Max",r._customFunc=function(t,e,r,i){if(t.length()>0&&e!==r){for(var n=-Number.MAX_VALUE,o=void 0,a=e;a<r;++a){var u=t.get(a),s=u.y;s>n&&(o=u,n=s)}return[o]}return[]},r}return n(e,t),e.KEY="MaxPointDecimator",e}(s);e.MaxPointDecimator=d;var f=function(t){function e(){var r=t.call(this)||this;return r._key=e.KEY,r._name="XYPointDecimator",r._customFunc=function(t,e,r,i){for(var n={},o=[],a=e;a<r;++a){var u=t.get(a),s=Math.floor(i(u.y));n.hasOwnProperty(s.toString())||(o.push(u),n[s]=!0)}return o},r}return n(e,t),e.KEY="XYPointDecimator",e}(s);e.XYPointDecimator=f;var m=function(){function t(){this._name="Simple Unimplemented Decimator"}return t.prototype.initialize=function(t,e,r){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return this._name},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,r,i){if(this._decimatedValues=[],0===i.length())return this._decimatedValues;var n,o,a=e.findFirstInsertionIdx(i,t),u=e.findLastInsertionIdx(i,r);a>0&&--a,u<i.length()&&++u,a<i.length()&&(n=Math.floor(this._xValueToCoord(i.get(a).x)),--n),o=t?this._xValueToCoord(t):a;for(var s=a,c=a;c<u;++c){var l=i.get(c),h=Math.floor(this._xValueToCoord(l.x)),d=c+1;h!==n&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(i,s,d,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(o),this._xCoordToValue(h))),o=h,n=h,s=d)}return s!==i.length()&&(this._decimatedValues=this._decimatedValues.concat(this._customFunc(i,s,s+1,this._yValueToCoord,this._xValueToCoord,this._xCoordToValue(o),Number.MAX_VALUE))),this._decimatedValues},t}();e.CustomContinuousXYDecimator=m;var p=function(t){function e(){var r=t.call(this)||this;return r._key=e.KEY,r._name="Avg",r._customFunc=l,r}return n(e,t),e.KEY="AvgContinuousDecimator",e}(m);function _(t,r,i,n,o,a){var u=[],s=[],c=Math.ceil(t(Number.MAX_VALUE));if(!(c<0)){for(var l=[],h=0;h<=c+1;++h)l.push(r(h));for(var d=0;d<a.length;++d){var f=a[d],m=void 0,p=void 0,_=e.findFirstInsertionIdx(a[d],n),y=e.findLastInsertionIdx(a[d],o);_>0&&--_,y===f.length()&&--y,s[d]=Array.apply(null,Array(c)).map(Number.prototype.valueOf,0);for(var v=_;v<y;++v){m=f.get(v),p=f.get(v+1);var x=Math.floor(t(m.x)),V=Math.floor(t(p.x)),g=p.x-m.x,T=0===g?0:p.y/g;if(x===V)if(void 0===n||m.x>n&&p.x<o)s[d][x]+=T;else{var b=1/(l[x+1]-l[x]);p.x<o?s[d][x]+=(p.x-l[x])*T*b:s[d][x]+=(l[x+1]-m.x)*T*b}else{b=1/(l[x+1]-l[x]);var C=n?Math.max(n,m.x):m.x,w=l[x+1];s[d][x]+=(w-C)*T*b;for(var M=x+1;M<V;++M)s[d][M]+=T;b=1/(l[V]-l[V-1]);var A=o?Math.min(o,p.x):p.x,k=l[V];s[d][V]+=(A-k)*T*b}}u[d]=[];var E=s[d];for(h=0;h<E.length;++h)u[d][h]={x:l[h],y:s[d][h]}}return u}}e.AvgContinuousDecimator=p,e.sumMultiXYSeriesValues=_;var y=function(){function t(){}return t.prototype.initialize=function(t,e,r){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,e,r){return this._decimatedValues=_(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,r),this._decimatedValues},t.KEY="SummedValueMultiXYSeriesDecimator",t}();e.SummedValueMultiXYSeriesDecimator=y;var v=function(t){function e(){return t.call(this)||this}return n(e,t),e.prototype.getKey=function(){return e.KEY},e.prototype.getName=function(){return""},e.prototype.decimateValues=function(t,e,r){this._decimatedValues=_(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,r);for(var i=0;i<this._decimatedValues[0].length;++i){for(var n=0,o=0;o<this._decimatedValues.length;++o)this._decimatedValues[o][i].y&&(n+=this._decimatedValues[o][i].y);if(n>0){var a=100/n;for(o=0;o<r.length;++o)this._decimatedValues[o][i].y&&(this._decimatedValues[o][i].y=this._decimatedValues[o][i].y*a)}}return this._decimatedValues},e.KEY="ResidencyDecimator",e}(y);e.ResidencyDecimator=v;var x=function(){function t(){}return t.prototype.initialize=function(t,e,r){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,e,r){return this._decimatedValues=_(this._xValueToCoord,this._xCoordToValue,this._yValueToCoord,t,e,[r])[0],this._decimatedValues},t.KEY="SummedValueXYSeriesDecimator",t}();e.SummedValueXYSeriesDecimator=x;var V=function(t){function e(e){var r=t.call(this,e,void 0,void 0,void 0,void 0)||this;return r._bucketPts=0,r}return n(e,t),e}(o.CandlestickValue);e.NEWSDecimationValue=V;var g=function(){function t(){}return t.prototype.initialize=function(t,e,r){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return this._key},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._buckets},t.prototype._dumpBucket=function(t,e,r){var i="valuesInBucket = "+r.toFixed(0)+", ";return i+="([avg]Time delta, avgValue) = ("+(e.x-t).toFixed(2)+", "+e.y.toFixed(2)+"), ",i+="(entry, min, max, exit) = ("+e.entry.toFixed(2)+", "+e.min.toFixed(2)+", "+e.max.toFixed(2)+", "+e.exit.toFixed(2)+")"},t.prototype.decimateValues=function(t,e,r){throw"Error need to implement decimate code"},t}();e.NEWSBaseDecimator=g;var T=function(t){function r(){var e=t.call(this)||this;return e._key=r.KEY,e}return n(r,t),r.prototype.createNewBucket=function(t,e){t.entry=e.y,t.exit=e.y,t.min=e.y,t.max=e.y,t.x=0,t.y=0,t._bucketPts=0,this.addToBucket(t,e)},r.prototype.addToBucket=function(t,e){t.x+=e.x,t.y+=e.y,t.min=Math.min(t.min,e.y),t.max=Math.max(t.max,e.y),t.exit=e.y,t._bucketPts++},r.prototype.finalizeBucket=function(t,e){void 0!==e&&e!==t._bucketPts&&console.log("AverageTime: mismatching pt calculation"),0===t._bucketPts&&console.log("AverageTime: 0 points"),t.x=t.x/t._bucketPts,t.y=t.y/t._bucketPts},r.prototype.decimateValues=function(t,r,i){if(this._buckets=[],0===i.length())return this._buckets;var n,o=e.findFirstInsertionIdx(i,t),a=e.findLastInsertionIdx(i,r);o>0&&--o,a<i.length()&&++a;var u=0;o<i.length()&&(u=Math.floor(this._xValueToCoord(i.get(o).x)),--u);for(var s=o;s<a;++s){var c=i.get(s),l=Math.floor(this._xValueToCoord(c.x));l!==u?(n&&(this.finalizeBucket(n),this._buckets.push(n)),n=new V,this.createNewBucket(n,c),u=l):this.addToBucket(n,c)}return n&&(this.finalizeBucket(n),this._buckets.push(n)),this._buckets},r.KEY="NEWSPointDecimator",r}(g);e.NEWSPointDecimator=T;var b=function(t){function r(e){var i=t.call(this)||this;return i._weightedSums={},i._prevX=0,i._prevX=0,i._key=r.KEY,e&&(i._states=e),i}return n(r,t),r.prototype.createNewBucket=function(t,e){var r;this._weightedSums={},t._bucketPts=0,this._isYObject||(r=e.y,t.x=0,t.y=r,t.entry=r,t.exit=r,t.min=r,t.max=r),this.addToBucket(t,e)},r.prototype.addToStateValueToBucket=function(t,e){0!==e&&(this._weightedSums[t]||(this._weightedSums[t]=0),this._weightedSums[t]+=e)},r.prototype.addToBucket=function(t,e){if(this._isYObject)if(this._states)for(var r in e.y)this.addToStateValueToBucket(this._states[r],(e.x-this._prevX)*e.y[r]);else for(var i in e.y)this.addToStateValueToBucket(i,(e.x-this._prevX)*e.y[i]);else{i=void 0;i=this._states?this._states[e.y]:e.y,t.exit=i,this.addToStateValueToBucket(i,e.x-this._prevX)}t.x+=e.x,t._bucketPts++,this._prevX=e.x},r.prototype.finalizeBucket=function(t,e){var r;void 0!==e&&e!==t._bucketPts&&console.log("AverageTime: mismatching pt calculation"),0===t._bucketPts&&console.log("AverageTime: 0 points"),t.x=t.x/t._bucketPts;var i=-Number.MAX_VALUE,n=-Number.MAX_VALUE,o=Number.MAX_VALUE;for(var a in this._weightedSums){if(void 0!==this._weightedSums[a]){var u=this._weightedSums[a];u>i&&(r=a,i=u)}var s=this._yValueToCoord(a);s>n&&(t.min=a,n=s),s<o&&(t.max=a,o=s)}void 0!==r?t.y=r:this._isYObject||(t.min=t.y,t.max=t.y)},r.prototype.decimateValues=function(t,r,i){if(this._buckets=[],0===i.length())return this._buckets;var n,o=e.findFirstInsertionIdx(i,t),a=e.findLastInsertionIdx(i,r);o>0&&--o,a<i.length()&&++a;var u=0;o<i.length()&&(this._isYObject="object"==typeof i.get(o).y,u=Math.floor(this._xValueToCoord(i.get(o).x)),--u);for(var s=o;s<a;++s){var c=i.get(s),l=Math.floor(this._xValueToCoord(c.x));if(l!==u){if(n&&(this.finalizeBucket(n),this._buckets.push(n)),u+1<l){var h=new V;this.createNewBucket(h,c),this.finalizeBucket(h),h.x=this._xCoordToValue(l-1),this._buckets.push(h),this._prevX=h.x}n=new V,this.createNewBucket(n,c),u=l}else this.addToBucket(n,c)}return n&&(this.finalizeBucket(n),this._buckets.push(n)),this._buckets},r.KEY="NEWSStateDecimator",r}(g);e.NEWSStateDecimator=b;var C=function(){function t(){}return t.prototype.initialize=function(t,e,r){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.setRectLimit=function(t){return this._rectLimit=t,this},t.prototype.decimateValues=function(t,e,r){this._data=[];for(var i=r.getData(),n=0;n<i.length;++n)this._data=this._data.concat(i[n]);return this._rectLimit&&(this._data.sort(function(t,e){return t.traceValue.dx>e.traceValue.dx?-1:t.traceValue.dx<e.traceValue.dx?1:0}),this._data=this._data.splice(0,this._rectLimit)),this._data},t.KEY="FlameChartRectLimitDecimator",t}();e.FlameChartRectLimitDecimator=C;var w=function(){function t(){this._minRectDelta=1}return t.prototype.initialize=function(t,e,r){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.setPixelWidth=function(t){return this._minRectDelta=t-1,this},t.prototype.setUserPixelFunction=function(t){this._userPixelFunction=t},t.prototype.mergeRects=function(t){for(var e=[],r=Math.ceil(this._xValueToCoord(Number.MAX_VALUE))+1,i=[],n=0;n<=r;++n)i.push(this._xCoordToValue(n));var o=0;r>1&&(o=this._xCoordToValue(1)-this._xCoordToValue(0));for(var a=0;a<t.length;++a){for(var u=t[a],s=[],c=void 0,l=-Number.MAX_VALUE,h=void 0,d=void 0,f=u.length,m=0;m<f;m++){var p=u[m];if(c&&c.traceValue.key===p.traceValue.key&&c.traceValue.x+c.traceValue.dx===p.traceValue.x)c.traceValue.dx+=p.traceValue.dx;else{l>(h=Math.floor(this._xValueToCoord(p.traceValue.x)))&&(h=l);var _=void 0;if((d=Math.floor(this._xValueToCoord(p.traceValue.x+p.traceValue.dx)))-h>this._minRectDelta)_={traceValue:{x:i[h],dx:i[d]-i[h],key:p.traceValue.key,name:p.traceValue.name,desc:p.traceValue.desc},decimatedValues:[p.traceValue],depth:p.depth};else{var y={},v=[];for(l=h+this._minRectDelta,p.traceValue.x<i[h]?y[p.traceValue.name]=p.traceValue.x+p.traceValue.dx-i[h]:y[p.traceValue.name]=p.traceValue.dx,v.push(p.traceValue),++m;m<f;++m){if(p=u[m],Math.floor(this._xValueToCoord(p.traceValue.x))>=l){--m;break}if(v.push(p.traceValue),y.hasOwnProperty(p.traceValue.name)||(y[p.traceValue.name]=0),p.traceValue.x+p.traceValue.dx>i[l]){y[p.traceValue.name]+=i[l]-p.traceValue.x,--m;break}y[p.traceValue.name]+=p.traceValue.dx}var x=v[v.length-1];if(1===v.length)_={traceValue:{x:i[h],dx:i[d]-i[h],key:x.key,name:x.name,desc:x.desc},decimatedValues:v,depth:p.depth};else{var V=void 0,g=0;for(var T in y){var b=y[T];b>g&&(V=T,g=b)}_={traceValue:{x:i[h],dx:l<i.length?i[l]-i[h]:i[h]+o,key:"merged",name:V,desc:x.desc},decimatedValues:v,depth:p.depth}}}s.push(_),c=_}}c=void 0;var C=!0;for(m=0;m<s.length;++m){C=!0,(p=s[m]).traceValue.dx<o&&(p.traceValue.dx=o),this._userPixelFunction&&(p=this._userPixelFunction(p)),c&&c.traceValue.key===p.traceValue.key&&c.traceValue.name===p.traceValue.name&&c.traceValue.x+c.traceValue.dx>=p.traceValue.x&&(c.traceValue.dx=p.traceValue.x+p.traceValue.dx-c.traceValue.x,c.decimatedValues.concat(p.decimatedValues),C=!1),C&&(e.push(p),c=p)}}return e},t.prototype.decimateValues=function(t,e,r){return this._data=this.mergeRects(r.getData()),this._data},t.KEY="FlameChartMergeRectDecimator",t}();e.FlameChartMergeRectDecimator=w;var M=function(){function t(){}return t.prototype.initialize=function(t,e,r,i){this._decimatedValues=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r,this._states=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,r,i){this._decimatedValues=new Array(this._states.length).fill(0).map(function(){return new Array});var n=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(n<0)){var o,a,u={},s={};this._states.forEach(function(t,e){s[t]=e,u[t]=Array.apply(null,Array(n)).map(Number.prototype.valueOf,0)});var c=e.findFirstInsertionIdx(i,t),l=e.findLastInsertionIdx(i,r);c>0&&--c;for(var h=[],d=0;d<=n;++d)h.push(this._xCoordToValue(d));for(var f=1/(h[1]-h[0]),m=c;m<l;++m){a=(o=i.get(m)).x+o.dx;var p=Math.floor(this._xValueToCoord(o.x)),_=Math.floor(this._xValueToCoord(a));if(p===_)u[o.name][p]+=o.dx*f;else{var y=t?Math.max(t,o.x):o.x,v=h[p+1];u[o.name][p]+=(v-y)*f;for(var x=p+1;x<_;++x)u[o.name][x]+=1;var V=r?Math.min(r,a):a,g=h[_];u[o.name][_]+=(V-g)*f}}var T=[];for(d=0;d<n;++d)T[d]={x:h[d],y:0};for(var b=0;b<this._states.length;++b){var C=u[this._states[b]];if(C)for(d=0;d<C.length;++d){var w=u[this._states[b]][d]?u[this._states[b]][d]:0;this._decimatedValues[b][d]={x:h[d],y:100*w}}else this._decimatedValues[b]=T}return this._decimatedValues}},t.KEY="TraceResidencyDecimator",t}();e.TraceResidencyDecimator=M;var A=function(){function t(){}return t.prototype.initialize=function(t,e,r,i){this._decimatedValues=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r,this._states=i},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,r,i){var n=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(n<0)){var o,a,u=e.findFirstInsertionIdx(i,t),s=e.findLastInsertionIdx(i,r);u>0&&--u,this._decimatedValues=[];for(var c=0;c<=n;++c)this._decimatedValues[c]=new V(this._xCoordToValue(c));var l={};this._states.forEach(function(t,e){l[t]=e});for(var h=u;h<s;++h){a=(o=i.get(h)).x+o.dx;var d=Math.floor(this._xValueToCoord(o.x)),f=Math.floor(this._xValueToCoord(a));if(this._decimatedValues[d].entry||(this._decimatedValues[d].entry=l[o.name],this._decimatedValues[d].exit=l[o.name],this._decimatedValues[d].min=l[o.name],this._decimatedValues[d].max=l[o.name]),d===f)this._decimatedValues[d].exit=l[o.name],this._decimatedValues[d].min=Math.min(this._decimatedValues[d].min,l[o.name]),this._decimatedValues[d].max=Math.max(this._decimatedValues[d].max,l[o.name]);else{this._decimatedValues[d].exit=l[o.name],this._decimatedValues[d].min=Math.min(this._decimatedValues[d].min,l[o.name]),this._decimatedValues[d].max=Math.max(this._decimatedValues[d].max,l[o.name]);for(var m=d+1;m<=f;++m)this._decimatedValues[m].entry=l[o.name],this._decimatedValues[m].exit=l[o.name],this._decimatedValues[m].min=l[o.name],this._decimatedValues[m].max=l[o.name]}}for(var p=0;p<this._decimatedValues.length;++p){var _=this._decimatedValues[p],y=_.exit;_.entry=this._states[_.entry],_.exit=this._states[y],_.y=this._states[y],_.min=this._states[_.min],_.max=this._states[_.max]}return this._decimatedValues}},t.KEY="TraceStateDecimator",t}();e.TraceStateDecimator=A;var k=function(){function t(){}return t.prototype.initialize=function(t,e,r){this._data=[],this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return t.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._data},t.prototype.mergeMarkers=function(t){for(var e=[],r=-Number.MAX_VALUE,i=0;i<t.length;++i){var n=t[i],o=this._xValueToCoord(n.x);o!==r&&(e.push(n),r=o)}return e},t.prototype.decimateValues=function(t,e,r){var i=r.getData();if(void 0!==t&&void 0!==e){for(var n=[],o=0;o<i.length;++o){var a=i[o];a.x<e&&a.x>t?n.push(a):a.dx&&a.x+a.dx<e&&a.x+a.dx>t&&n.push(a)}this._data=this.mergeMarkers(n)}else this._data=this.mergeMarkers(i);return this._data},t.KEY="SimpleMarkerDecimator",t}();e.SimpleMarkerDecimator=k;var E=function(){function t(){}return t.prototype.initialize=function(t,e,r){this._xValueToCoord=t,this._xCoordToValue=e,this._yValueToCoord=r},t.prototype.getKey=function(){return y.KEY},t.prototype.getName=function(){return""},t.prototype.getValues=function(){return this._decimatedValues},t.prototype.decimateValues=function(t,r,i){this._decimatedValues=[];var n=[],o=Math.ceil(this._xValueToCoord(Number.MAX_VALUE));if(!(o<0)){for(var a=[],u=0;u<=o+1;++u)a.push(this._xCoordToValue(u));for(var s=0;s<i.length;++s){var c=i[s],l=void 0,h=void 0,d=e.findFirstInsertionIdx(i[s],t),f=e.findLastInsertionIdx(i[s],r);d>0&&--d,f===c.length()&&--f,n[s]=Array.apply(null,Array(o)).map(Number.prototype.valueOf,0);for(var m=d;m<f;++m){l=c.get(m),h=c.get(m+1);var p=Math.floor(this._xValueToCoord(l.x)),_=Math.floor(this._xValueToCoord(h.x)),y=h.x-l.x,v=0===y?0:h.y/y;if(p===_)if(void 0===t||l.x>t&&h.x<r)n[s][p]+=v;else{var x=1/(a[p+1]-a[p]);h.x<r?n[s][p]+=(h.x-a[p])*v*x:n[s][p]+=(a[p+1]-l.x)*v*x}else{x=1/(a[p+1]-a[p]);var V=t?Math.max(t,l.x):l.x,g=a[p+1];n[s][p]+=(g-V)*v*x;for(var T=p+1;T<_;++T)n[s][T]+=v;x=1/(a[_]-a[_-1]);var b=r?Math.min(r,h.x):h.x,C=a[_];n[s][_]+=(b-C)*v*x}}this._decimatedValues[s]=[];var w=n[s];for(u=0;u<w.length;++u)this._decimatedValues[s][u]={x:a[u],y:n[s][u]?n[s][u]:0}}return this._decimatedValues}},t.KEY="XYHeatMapDecimator",t}();e.XYHeatMapDecimator=E;var D=[new v,new c,new h,new d,new p,new w,new C,new T,new b,new k,new f,new x,new y,new M];e.InternalDecimatorMap={},D.forEach(function(t){e.InternalDecimatorMap[t.getKey()]=t})},28:function(t,e,r){(function(e,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var i;i=function(){"use strict";function t(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,o=void 0,a=void 0,u=function(t,e){m[n]=t,m[n+1]=e,2===(n+=2)&&(a?a(p):V())},s="undefined"!=typeof window?window:void 0,c=s||{},l=c.MutationObserver||c.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(p,1)}}var m=new Array(1e3);function p(){for(var t=0;t<n;t+=2){(0,m[t])(m[t+1]),m[t]=void 0,m[t+1]=void 0}n=0}var _,y,v,x,V=void 0;function g(t,e){var r=this,i=new this.constructor(C);void 0===i[b]&&K(i);var n=r._state;if(n){var o=arguments[n-1];u(function(){return L(n,i,o,r._result)})}else Y(r,i,t,e);return i}function T(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(C);return E(e,t),e}h?V=function(){return e.nextTick(p)}:l?(y=0,v=new l(p),x=document.createTextNode(""),v.observe(x,{characterData:!0}),V=function(){x.data=y=++y%2}):d?((_=new MessageChannel).port1.onmessage=p,V=function(){return _.port2.postMessage(0)}):V=void 0===s?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(p)}:f()}catch(t){return f()}}():f();var b=Math.random().toString(36).substring(2);function C(){}var w=void 0,M=1,A=2;function k(e,r,i){r.constructor===e.constructor&&i===g&&r.constructor.resolve===T?function(t,e){e._state===M?S(t,e._result):e._state===A?I(t,e._result):Y(e,void 0,function(e){return E(t,e)},function(e){return I(t,e)})}(e,r):void 0===i?S(e,r):t(i)?function(t,e,r){u(function(t){var i=!1,n=function(t,e,r,i){try{t.call(e,r,i)}catch(t){return t}}(r,e,function(r){i||(i=!0,e!==r?E(t,r):S(t,r))},function(e){i||(i=!0,I(t,e))},t._label);!i&&n&&(i=!0,I(t,n))},t)}(e,r,i):S(e,r)}function E(t,e){if(t===e)I(t,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof(i=e),null===i||"object"!==n&&"function"!==n)S(t,e);else{var r=void 0;try{r=e.then}catch(e){return void I(t,e)}k(t,e,r)}var i,n}function D(t){t._onerror&&t._onerror(t._result),P(t)}function S(t,e){t._state===w&&(t._result=e,t._state=M,0!==t._subscribers.length&&u(P,t))}function I(t,e){t._state===w&&(t._state=A,t._result=e,u(D,t))}function Y(t,e,r,i){var n=t._subscribers,o=n.length;t._onerror=null,n[o]=e,n[o+M]=r,n[o+A]=i,0===o&&t._state&&u(P,t)}function P(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var i=void 0,n=void 0,o=t._result,a=0;a<e.length;a+=3)i=e[a],n=e[a+r],i?L(r,i,n,o):n(o);t._subscribers.length=0}}function L(e,r,i,n){var o=t(i),a=void 0,u=void 0,s=!0;if(o){try{a=i(n)}catch(t){s=!1,u=t}if(r===a)return void I(r,new TypeError("A promises callback cannot return that same promise."))}else a=n;r._state!==w||(o&&s?E(r,a):!1===s?I(r,u):e===M?S(r,a):e===A&&I(r,a))}var O=0;function K(t){t[b]=O++,t._state=void 0,t._result=void 0,t._subscribers=[]}var N=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(C),this.promise[b]||K(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===w&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,i=r.resolve;if(i===T){var n=void 0,o=void 0,a=!1;try{n=t.then}catch(t){a=!0,o=t}if(n===g&&t._state!==w)this._settledAt(t._state,e,t._result);else if("function"!=typeof n)this._remaining--,this._result[e]=t;else if(r===F){var u=new r(C);a?I(u,o):k(u,t,n),this._willSettleAt(u,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,r){var i=this.promise;i._state===w&&(this._remaining--,t===A?I(i,r):this._result[e]=r),0===this._remaining&&S(i,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;Y(t,void 0,function(t){return r._settledAt(M,e,t)},function(t){return r._settledAt(A,e,t)})},t}(),F=function(){function e(t){this[b]=O++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){E(t,e)},function(e){I(t,e)})}catch(e){I(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return F.prototype.then=g,F.all=function(t){return new N(this,t).promise},F.race=function(t){var e=this;return i(t)?new e(function(r,i){for(var n=t.length,o=0;o<n;o++)e.resolve(t[o]).then(r,i)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},F.resolve=T,F.reject=function(t){var e=new this(C);return I(e,t),e},F._setScheduler=function(t){a=t},F._setAsap=function(t){u=t},F._asap=u,F.polyfill=function(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=F},F.Promise=F,F},t.exports=i()}).call(this,r(29),r(22))},29:function(t,e){var r,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var s,c=[],l=!1,h=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):h=-1,c.length&&f())}function f(){if(!l){var t=u(d);l=!0;for(var e=c.length;e;){for(s=c,c=[];++h<e;)s&&s[h].run();h=-1,e=c.length}s=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new m(t,e)),1!==c.length||l||u(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},3:function(e,r){e.exports=t},346:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(48),n=r(2),o=r(26),a=r(3),u=self;u.addEventListener("message",function(t){var e,r,s=t.data;s.xAxis.axisDesc.scaleType===i.AxisType.Ordinal?e=a.scaleBand().range([0,s.xRange]).padding(.1).align(.5).domain(s.xDomain):(s.xAxis.axisDesc.scaleType===i.AxisType.Linear?e=a.scaleLinear().domain(s.xDomain).clamp(!0):s.xAxis.axisDesc.scaleType===i.AxisType.Logarithmic&&(e=a.scaleLog().domain(s.xDomain).clamp(!0)),e.range([0,s.xRange])),s.yAxis&&(s.yAxis.axisDesc.scaleType===i.AxisType.Ordinal?r=a.scaleBand().range([0,s.yRange]).padding(.1).align(.5).domain(s.yDomain):(s.yAxis.axisDesc.scaleType===i.AxisType.Linear?r=a.scaleLinear().domain(s.yDomain).clamp(!0):s.yAxis.axisDesc.scaleType===i.AxisType.Logarithmic&&(r=a.scaleLog().domain(s.yDomain).clamp(!0)),r.range([s.yRange,0])));var c,l=o.InternalDecimatorMap[s.decimatorName];if(l.initialize(e,e.invert,r,s.names),s.names){c=[];for(var h=0;h<s.values.length;++h)c[h]=new n.SimpleBuffer(s.values[h])}else c=new n.SimpleBuffer(s.values);var d=l.decimateValues(s.xStart,s.xEnd,c);u.postMessage(d,void 0)})},48:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Linear=0]="Linear",t[t.Logarithmic=1]="Logarithmic",t[t.Ordinal=2]="Ordinal"}(e.AxisType||(e.AxisType={}))},67:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){this.x=t,this.y=e}}();e.XYValue=i;var n=function(){return function(t,e,r,i){this.x=t,this.min=e,this.max=r,this.y=i}}();e.MinMaxValue=n;var o=function(){return function(t,e,r,i,n){this.x=t,this.min=e,this.max=r,this.entry=i,this.exit=n}}();e.CandlestickValue=o;var a=function(){function t(t,e){void 0===e&&(e={}),this.key=t,this.data=e}return t.prototype.addValue=function(t,e){var r=this.data;return r.hasOwnProperty(t)?r[t]+=e:r[t]=e,this},t}();e.SummaryValue=a}})});